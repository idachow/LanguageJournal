#################################
# "Language Journal" By: Ida Chow
#################################

# switch to JSON, CSV ???!!!

# languagejournal_main:
# main file for languagejournal

from Tkinter import *
import random
import copy
import time
import csv
from eventBasedAnimationClass import EventBasedAnimationClass

### import other class files
from vocab import Vocab
from window import Window

## det window size
import ctypes
user32 = ctypes.windll.user32
screensize = screenWidth, screenHeight = user32.GetSystemMetrics(0), user32.GetSystemMetrics(1)
print screensize



class LanguageJournal(EventBasedAnimationClass):
	def __init__(self,width,height):

		self.timerDelay = None # in milliseconds (set to None to turn off timer)

		self.width = width
		self.height = height
		self.cx = width/2
		self.cy = height/2
		self.currentWindow = 0


	def Enter(self,event):
		""" Someone Pressed Enter """
		print "You entered >> %s" % (self.entrybox.get())
	
	def onMouseMotion(self, event):
		pass

	def onKeyPressed(self, event):
		if (event.char == "!"): 
			filename = "data.csv"
			# opening the file with w+ mode truncates the file
			f = open(filename, "w+")
			f.close()

	def onMousePressed(self,event):
		x,y = event.x, event.y
		backcoord = self.height/20
		if self.currentWindow == 0:
			if (self.cx+10 <= x <= self.cx+110) and (self.cy-50 <= y <= self.cx+50):
				self.currentWindow = 1
				self.window.screen_newVocab()
			elif (self.cx-110 <= x <= self.cx-10) and (self.cy-50 <= y <= self.cx+50):
				self.currentWindow = 2
				self.window.screen_viewVocab()
		if self.currentWindow == 1 or self.currentWindow == 2:
			if (backcoord/20 <= x <= backcoord/20+100) and (backcoord/20 <= y <= backcoord/20+100):
				self.currentWindow = 0

	def redrawAll(self):
		if self.currentWindow == 0:
			width = self.width
			height = self.height
			self.canvas.create_rectangle(0,0,width,height,fill="#2D2E27")
			self.selectCurrentWindow()



	def selectCurrentWindow(self):
		if (self.currentWindow == 0):
			self.window.screen_start()
		elif (self.currentWindow == 1):
			self.window.screen_newVocab()
		else: pass

	def initAnimation(self):

		self.root.bind("<Button-1>", lambda event: self.onMousePressed(event))
		self.window = Window(self.canvas,self.width, self.height,self.cx,self.cy,self.root)



myapp = LanguageJournal(.85*screenWidth,.65*screenHeight)

myapp.run()



############ mp3 testing 

# import winsound

# winsound.Beep(3000, 1000)
# winsound.PlaySound('ocean_nobirds.mp3', winsound.SND_FILENAME)